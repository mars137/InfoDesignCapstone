package com.example.Dao;



import java.sql.PreparedStatement;
import java.sql.SQLException;
import java.util.List;
import java.util.Map;

import javax.sql.DataSource;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.jdbc.core.BatchPreparedStatementSetter;
import org.springframework.jdbc.core.JdbcTemplate;
import org.springframework.jdbc.core.namedparam.MapSqlParameterSource;
import org.springframework.jdbc.core.namedparam.SqlParameterSource;
import org.springframework.jdbc.core.simple.SimpleJdbcCall;
import org.springframework.stereotype.Component;

import com.example.bean.AddStatus;
import com.example.bean.Login;

@Component
public class LoginDao {
@Autowired
	JdbcTemplate jdbcTemplate;


@Autowired
private DataSource dataSource;

private SimpleJdbcCall jdbcCall;
@Autowired
public void setDataSource(DataSource dataSource) {
    this.dataSource = dataSource;
    this.jdbcCall =  new SimpleJdbcCall(dataSource).
                     withProcedureName("retrive_id");
 }

  


	public void insertLogin(final Login addetails) {

		  String sql = "insert into customers_auth " +
			"(TASK_ID,DUE_DATE, LOGIN_ID, STATUS) VALUES (?, ?, ?,?)";

		  jdbcTemplate.batchUpdate(sql, new BatchPreparedStatementSetter() {
			  
			  @Override
			public void setValues(PreparedStatement ps, int i) throws SQLException {
				
				ps.setInt(1,addetails.g );
				ps.setDate(2, addetails.getEmail());
				ps.setInt(3,addetails.getPassword() );
				ps.setString(4, addetails.getName());
				ps.setString(5, addetails.getLastName());
				ps.setString(6, addetails.getGrpNo());
			}

			@Override
			public int getBatchSize() {
				return addetails.size();
			}
		  });
		}
	
	
}
